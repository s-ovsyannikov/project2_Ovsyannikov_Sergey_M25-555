# PrimitiveDB

Простая консольная СУБД с поддержкой CRUD-операций.

## Управление таблицами

Доступные команды:

- `create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> ...` — создать таблицу, автоматически добавляется столбец `ID:int`.
- `drop_table <имя_таблицы>` — удалить таблицу.
- `list_tables` — показать все таблицы.
- `help` — справка.
- `exit` — выход.

**Поддерживаемые типы данных:**
 `int`, `str`, `bool`.

### Пример использования (управление таблицами)

https://asciinema.org/a/HVgD9AI6ztIf23bbWcQzhet72

[![asciicast](https://asciinema.org/a/HVgD9AI6ztIf23bbWcQzhet72.svg)](https://asciinema.org/a/HVgD9AI6ztIf23bbWcQzhet72)

## CRUD-операции

Доступные команды:

- `insert into <имя_таблицы> values (<значение1>, <значение2>, ...)` — создать запись в таблице.
- `select from <имя_таблицы>` — прочитать все записи таблицы.
- `select from <имя_таблицы> where <столбец> = <значение>` — прочитать все записи таблицы по условию.
- `update <имя_таблицы> set <столбец> = <новое_значение> where <столбец> = <значение>` — обновить запись в таблице.
- `delete from <имя_таблицы> where <столбец> = <значение>` — удалить запись из таблицы по условию.

### Пример использования (CRUD-операции)

https://asciinema.org/a/HpfIXJWli5e2VAa6oV5rIRByU

### Форматы команд
```bash
# создание записи
insert into users values ("John", 25, true)
 
# выборка данных
select from users
select from users where age = 25
select from users where name = "John"

# обновление данных
update users set age = 26 where name = "John"
update users set age=26 where name="John"

# удаление данных
delete from users where ID = 1
delete from users where name = "John"
```
## Обработка ошибок
- **KeyError** - обращение к несуществующим таблицам
- **ValueError** - ошибки валидации типов данных
- **FileNotFoundError** - проблемы с файлами данных

## Подтверждение опасных операций
- **Удаление таблиц** - `drop_table`
- **Удаление записей** - `delete`

## Кэширование запросов 
- автоматическое кэширование результатов запросов `select`
- повторные одинаковые запросы выполняются из кэша
- кэш очищается при изменении данных 

## Замер времени выполнения 
- для операций ввода-вывода отображается время выполнения запроса

## Декораторы
 - @handle_db_errors - обработка исключений
 - @confirm_action("операция") - подтверждение действий
 - @log_time - замер времени выполнения
 - кэш хранится в замыкании 

## Структура данных

- Метаданные: хранятся в db_meta.json
- Данные таблиц: каждая таблица хранится в отдельном файле в папке data/ (например: data/users.json)

## Архитектура
Проект состоит из следующих модулей:
 - main.py - точка входа в приложение
 - engine.py - парсинг команд, управление циклом, основной исполнительный файл
 - core.py - логика работы с таблицами и данными
 - utils.py - вспомогательные функции для работы с файлами
 - parser.py - парсинг условий и вводимых выражений
 - decorators.py - система декораторов

## Пример использования (весь функционал)

